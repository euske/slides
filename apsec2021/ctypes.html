<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How Do Programmers Express High-Level Concepts using Primitive Data Types? -
Yusuke Shinyama, Yoshitaka Arahori and Katsuhiko Gondow (APSEC 2021 Paper #125)
</title>
<style><!--
body { line-height: 1.5; }
h1 { border-bottom: solid 4px #000080; }
h2 { border-bottom: solid 2px #000080; }
h3 { border-bottom: solid 1px #000080; }
table { border-collapse: collapse; margin: 0.5em; }
kbd { border: 1px solid black; padding: 4px; margin: 4px; }
code { font-weight: bold; }
pre { border: 1px solid black; padding: 0.3em; }
.announce { font-size: 120%; font-weight: bold; }
.author { text-align: right; }
.figure { outline: 1px solid black; padding: 0.5em; margin: 1em; text-align: center; }
.notice { text-align: center; font-weight: bold; outline: 4px solid black; padding: 1em; margin: 1em; font-size: 200%; }
.comment { color: green; }
.path { background: #cfc; }
.xcoord { background: #cff; }
.ycoord { background: #ccf; }
.width { background: #fcc; }
.height { background: #ffc; }
--></style>
</head>
<body>
<div class=nav>
<a href="../index.html">&lt; back</a>
</div>
<h1>How Do Programmers Express High-Level Concepts using Primitive Data Types?</h1>
<div class=announce>
URL: <code>https://euske.github.io/</code>
</div>

<div class=author>
Yusuke Shinyama<br>
Yoshitaka Arahori<br>
Katsuhiko Gondow<br>
(APSEC 2021 Paper #125)<br>
</div>

<ol>
<li> <a href="#background">Background</a>
<ul>
<li> <a href="#rqs">Research Questions</a>
<li> <a href="#related">Related Work</a>
</ul>
<li> <a href="#basic">Basic Idea</a>
<li> <a href="#experiment">Experiment</a>
<li> <a href="#inference">Inferring C-types</a>
<li> <a href="#conclusion">Conclusion</a>
<ul>
<li> <a href="#threats">Threats to Validity</a>
</ul>
</ol>


<h2 id="background">1. Background</h2>
<ul>
<li> Modern programming languages allow various user defined types.
<li> <strong>Primitive obsession</strong> often is considered as bad smell:
<blockquote><pre>
String username = getCurrentUserName();
String path = "/home/"+username+"/user.cfg";
<span class=comment>// Unsafe path: extra check is needed!</span>
File config = new File(path);
</pre></blockquote>
<p>
A better (but cumbersome) code would be:
<blockquote><pre>
User user = getCurrentUser();
Path path = Paths.get(user.getHomeDirectory(), "user.cfg");
<span class=comment>// Path is guaranteed to be safe.</span>
File config = new File(path);
</pre></blockquote>
<li> <code>String</code> and <code>int</code> types, however,
  are still used for a wide variety of purposes.
<li> We are interested in how generic data types
  (such as <code>String</code> and <code>int</code>)
  are used in various software projects.
</ul>


<h3 id="rqs">1.1. Research Questions</h3>
<ol>
<li> What are common "high-level data types"?
<li> How do programmers express these high-level types in source code?
<li> Is it possible to infer them from surface clues?
</ol>

<h3 id="related">1.2. Related Work</h3>
<ul>
<li> O'Callahan et al.: Type identification by static analysis + type inference.
When two values are stored at the same location, they are the same type.
<li> Guo et al.:  Dynamic analysis + type inference.
<li> Dash et al.: Similar names imply related types.
<li> Jiang et al.: Type inconsistency detection via dimensional analysis.
</ul>

<h2 id="basic">2. Basic Idea</h2>
<p>
When programmers make an API call, they are aware of the role of its arguments:
<blockquote><pre>
String <mark>x</mark> = "foo/bar.txt";
var f = new java.io.File(<mark>x</mark>);  <span class=comment>// x is a pathname</span>
</pre></blockquote>

<ul>
<li> Here, <code><mark>x</mark></code> refers to a <code>String</code>,
but it's clearly a pathname.
<li> We define these specific roles of data types
as <strong>Conceptual Types</strong> or <strong>c-type</strong>.<br>
(They can also be called <strong>Abstract Types</strong>!)
<div>
<svg xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink"
     version="1.1" width="200" height="150">
  <g stroke="black" stroke-width="2" fill="none">
    <circle cx="100" cy="75" r="70" />
    <circle cx="120" cy="90" r="40" />
  </g>
  <g text-anchor="middle">
    <text x="100" y="40">data type</text>
    <text x="120" y="100">c-type</text>
  </g>
</svg>
</div>
<li> API calls are easy to collect and its function is well defined.<br>
  &rarr; <strong>They provide us a plenty of unambiguous use cases forx c-types!</strong>
</ul>

<p>
We studied Java Standard API and defined 12 commonly used c-types:
<table border>
<tr><th>C-Type</th></th><th>Language Type</th><th>Description</th><th># Methods</th></tr>
<tr><td colspan="4"></td></tr>
<tr><td>PATH   </td><td> <code>String</code> </td><td> Path name</td>
<td align=right>14</td></tr>
<tr><td>URL    </td><td> <code>String</code> </td><td> URL/URI</td>
<td align=right>4</td></tr>
<tr><td>SQL    </td><td> <code>String</code> </td><td> SQL statement</td>
<td align=right>10</td></tr>
<tr><td>HOST   </td><td> <code>String</code> </td><td> Host name</td>
<td align=right>17</td></tr>
<tr><td>PORT   </td><td> <code>int</code>    </td><td> Port number</td>
<td align=right>25</td></tr>
<tr><td>XCOORD </td><td> <code>int</code>    </td><td> X coordinate (GUI)</td>
<td align=right>25</td></tr>
<tr><td>YCOORD </td><td> <code>int</code>    </td><td> Y coordinate (GUI)</td>
<td align=right>25</td></tr>
<tr><td>WIDTH  </td><td> <code>int</code>    </td><td> width (GUI)</td>
<td align=right>24</td></tr>
<tr><td>HEIGHT </td><td> <code>int</code>    </td><td> height (GUI)</td>
<td align=right>24</td></tr>
<tr><td>YEAR   </td><td> <code>int</code>    </td><td> year</td>
<td align=right>18</td></tr>
<tr><td>MONTH  </td><td> <code>int</code>    </td><td> month</td>
<td align=right>14</td></tr>
<tr><td>DAY    </td><td> <code>int</code>    </td><td> day</td>
<td align=right>18</td></tr>
<tr><td colspan="4"></td></tr>
<tr><td colspan="3">Total</td><td align=right>218</td></tr>
</table>

<p>
Method examples:
<ul>
<li> <code>new java.io.File(<u>PATH</u>)</code>
<li> <code>new java.net.URI(<u>URL</u>)</code>
<li> <code>java.sql.Statement.execute(<u>SQL</u>)</code>
<li> <code>java.net.InetAddress.getByName(<u>HOST</u>)</code>
<li> <code>new java.net.Socket(<u>HOST</u>, <u>PORT</u>)</code>
<li> <code>new java.awt.Point(<u>XCOORD</u>, <u>YCOORD</u>)</code>
<li> <code>new java.awt.Dimension(<u>WIDTH</u>, <u>HEIGHT</u>)</code>
<li> <code>new java.util.Date(<u>YEAR</u>, <u>MONTH</u>, <u>DAY</u>)</code>
<li> <code>java.util.Date.setYear(<u>YEAR</u>)</code>
<li> <code>java.time.LocalDate.of(<u>YEAR</u>, <u>MONTH</u>, <u>DAY</u>)</code>
<li> ...
</ul>

<p>
The criterion that we used are:
<ol type=a>
<li> Clearly defined and well understood.
<li> Distinct enough to not mix up with other concepts.
<li> Widely used in many applications.
</ol>

<h2 id="experiment">3. Experiment</h2>

<p>
We did the following experiments:
<ol>
<li> Choose medium-sized 26 Java open source projects.
<li> Search all the specified API calls.
<li> Extract <strong>c-type expressions</strong> from the arguments of each API call.
<li> Examine the type, complexity and commonly used words for each c-type expression.
</ol>

<h4>C-type Expression Examples:</h4>
<blockquote><pre>
<u>zookeeper/.../TxnLogToolkit.java:</u>
    ...
    File file = new File(<span class=path>dir.getPath() + File.separator + Util.makeLogName(zxid)</span><sub>[PATH]</sub>);
</pre></blockquote>

<blockquote><pre>
<u>jitsi/.../SIPCommSplitPaneDivider.java:</u>
    ...
    rightButton.setBounds(<span class=xcoord>(insets.left * 2) + leftSize.width + rightSize.width</span><sub>[XCOORD]</sub>,
                          <span class=ycoord>y</span><sub>[YCOORD]</sub>, <span class=width>rightSize.width</span><sub>[WIDTH]</sub>, <span class=height>rightSize.height</span><sub>[HEIGHT]</sub>);
</pre></blockquote>

<h3 id="projects">3.1. Projects and Sizes</h3>
<table border>
<tr><th>Project</th><th>Description</th><th>LoC</th></tr>
<tr><td colspan="3"></td></tr>
<tr><td>hadoop 3.3.1      </td><td>distributed computation </td><td align=right>1,789k</td></tr>
<tr><td>ghidra 10.0       </td><td>binary analyzer         </td><td align=right>1,588k</td></tr>
<tr><td>ignite 2.10.0     </td><td>distributed database    </td><td align=right>1,165k</td></tr>
<tr><td>jetty 11.0.5      </td><td>web container           </td><td align=right>  441k</td></tr>
<tr><td>kafka 2.7.1       </td><td>stream processing       </td><td align=right>  384k</td></tr>
<tr><td>tomcat 8.5.68     </td><td>web server              </td><td align=right>  349k</td></tr>
<tr><td>jitsi 2.10        </td><td>video conference        </td><td align=right>  327k</td></tr>
<tr><td>binnavi 6.1.0     </td><td>binary analyzer         </td><td align=right>  309k</td></tr>
<tr><td>netty 4.1.65      </td><td>network library         </td><td align=right>  303k</td></tr>
<tr><td>libgdx 1.10.0     </td><td>game framework          </td><td align=right>  272k</td></tr>
<tr><td>alluxio 2.5.0-3   </td><td>data orchestration      </td><td align=right>  228k</td></tr>
<tr><td>plantuml 1.2021.7 </td><td>UML generator           </td><td align=right>  210k</td></tr>
<tr><td>grpc 1.38.1       </td><td>RPC framework           </td><td align=right>  195k</td></tr>
<tr><td>jenkins 2.299     </td><td>automation              </td><td align=right>  177k</td></tr>
<tr><td>jmeter 5.4.1      </td><td>network analyzer        </td><td align=right>  145k</td></tr>
<tr><td>jedit 5.6.0       </td><td>text editor             </td><td align=right>  125k</td></tr>
<tr><td>gephi 0.9.2       </td><td>graph visualizer        </td><td align=right>  120k</td></tr>
<tr><td>zookeeper 3.7.0   </td><td>distributed computation </td><td align=right>  114k</td></tr>
<tr><td>selenium 3.141.59 </td><td>browser automation      </td><td align=right>   91k</td></tr>
<tr><td>okhttp 4.9.1      </td><td>HTTP client             </td><td align=right>   36k</td></tr>
<tr><td>jhotdraw 7.0.6    </td><td>graph drawing           </td><td align=right>   32k</td></tr>
<tr><td>arduino 1.8.15    </td><td>development environment </td><td align=right>   27k</td></tr>
<tr><td>gson 2.8.7        </td><td>serialization framework </td><td align=right>   25k</td></tr>
<tr><td>websocket 1.5.2   </td><td>network framework       </td><td align=right>   15k</td></tr>
<tr><td>picasso 2.8       </td><td>image processing        </td><td align=right>    9k</td></tr>
<tr><td>jpacman           </td><td>action game             </td><td align=right>    3k</td></tr>
<tr><td colspan="3"></td></tr>
<tr><td colspan="2">Total</td><td>8,480k</td></tr>
</table>

<h3 id="numctypes">3.2. Number of Obtained C-Type Expressions</h3>
<p>
The distribution of c-type expressions differs by application domain.
The total number of c-types is roughly propotional to the project size.
<div class=figure>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="680" height="400" version="1.1"><g fill="none" stroke="black" stroke-width="2"><line x1="30" y1="320" x2="30" y2="20" /><line x1="30" y1="320" x2="560" y2="320" /><line x1="560" y1="20" x2="560" y2="320" /><rect fill="#0f0" x="40" y="311" width="10" height="9" /><rect fill="#f00" x="40" y="310" width="10" height="1" /><rect fill="#f8f" x="40" y="310" width="10" height="0" /><rect fill="#08f" x="40" y="307" width="10" height="3" /><rect fill="#f80" x="40" y="304" width="10" height="3" /><rect fill="#080" x="40" y="304" width="10" height="0" /><rect fill="#f0f" x="40" y="304" width="10" height="0" /><rect fill="#ff0" x="40" y="304" width="10" height="0" /><rect fill="#0ff" x="40" y="304" width="10" height="0" /><rect fill="#c00" x="40" y="302" width="10" height="2" /><rect fill="#0c0" x="40" y="301" width="10" height="2" /><rect fill="#00c" x="40" y="299" width="10" height="2" /><rect fill="#444" x="40" y="293" width="10" height="6" /><circle fill="white" cx="45" cy="251" r="4" /><rect fill="#0f0" x="60" y="315" width="10" height="5" /><rect fill="#f00" x="60" y="315" width="10" height="1" /><rect fill="#f8f" x="60" y="315" width="10" height="0" /><rect fill="#08f" x="60" y="313" width="10" height="1" /><rect fill="#f80" x="60" y="312" width="10" height="1" /><rect fill="#080" x="60" y="311" width="10" height="1" /><rect fill="#f0f" x="60" y="311" width="10" height="1" /><rect fill="#ff0" x="60" y="306" width="10" height="5" /><rect fill="#0ff" x="60" y="301" width="10" height="5" /><rect fill="#c00" x="60" y="301" width="10" height="0" /><rect fill="#0c0" x="60" y="301" width="10" height="0" /><rect fill="#00c" x="60" y="301" width="10" height="0" /><rect fill="#444" x="60" y="301" width="10" height="0" /><circle fill="white" cx="65" cy="281" r="4" /><rect fill="#0f0" x="80" y="315" width="10" height="5" /><rect fill="#f00" x="80" y="314" width="10" height="1" /><rect fill="#f8f" x="80" y="314" width="10" height="0" /><rect fill="#08f" x="80" y="314" width="10" height="0" /><rect fill="#f80" x="80" y="314" width="10" height="0" /><rect fill="#080" x="80" y="311" width="10" height="3" /><rect fill="#f0f" x="80" y="308" width="10" height="3" /><rect fill="#ff0" x="80" y="300" width="10" height="8" /><rect fill="#0ff" x="80" y="292" width="10" height="8" /><rect fill="#c00" x="80" y="292" width="10" height="0" /><rect fill="#0c0" x="80" y="292" width="10" height="0" /><rect fill="#00c" x="80" y="292" width="10" height="0" /><rect fill="#444" x="80" y="292" width="10" height="0" /><circle fill="white" cx="85" cy="239" r="4" /><rect fill="#0f0" x="100" y="319" width="10" height="1" /><rect fill="#f00" x="100" y="319" width="10" height="0" /><rect fill="#f8f" x="100" y="319" width="10" height="0" /><rect fill="#08f" x="100" y="319" width="10" height="0" /><rect fill="#f80" x="100" y="319" width="10" height="0" /><rect fill="#080" x="100" y="316" width="10" height="3" /><rect fill="#f0f" x="100" y="312" width="10" height="3" /><rect fill="#ff0" x="100" y="305" width="10" height="8" /><rect fill="#0ff" x="100" y="297" width="10" height="8" /><rect fill="#c00" x="100" y="297" width="10" height="0" /><rect fill="#0c0" x="100" y="297" width="10" height="0" /><rect fill="#00c" x="100" y="297" width="10" height="0" /><rect fill="#444" x="100" y="297" width="10" height="0" /><circle fill="white" cx="105" cy="267" r="4" /><rect fill="#0f0" x="120" y="276" width="10" height="44" /><rect fill="#f00" x="120" y="273" width="10" height="3" /><rect fill="#f8f" x="120" y="273" width="10" height="0" /><rect fill="#08f" x="120" y="272" width="10" height="1" /><rect fill="#f80" x="120" y="271" width="10" height="1" /><rect fill="#080" x="120" y="232" width="10" height="38" /><rect fill="#f0f" x="120" y="194" width="10" height="38" /><rect fill="#ff0" x="120" y="132" width="10" height="61" /><rect fill="#0ff" x="120" y="71" width="10" height="61" /><rect fill="#c00" x="120" y="70" width="10" height="2" /><rect fill="#0c0" x="120" y="68" width="10" height="2" /><rect fill="#00c" x="120" y="66" width="10" height="2" /><rect fill="#444" x="120" y="65" width="10" height="2" /><circle fill="white" cx="125" cy="47" r="4" /><rect fill="#0f0" x="140" y="316" width="10" height="4" /><rect fill="#f00" x="140" y="314" width="10" height="2" /><rect fill="#f8f" x="140" y="314" width="10" height="0" /><rect fill="#08f" x="140" y="306" width="10" height="8" /><rect fill="#f80" x="140" y="297" width="10" height="9" /><rect fill="#080" x="140" y="297" width="10" height="0" /><rect fill="#f0f" x="140" y="297" width="10" height="0" /><rect fill="#ff0" x="140" y="297" width="10" height="0" /><rect fill="#0ff" x="140" y="297" width="10" height="0" /><rect fill="#c00" x="140" y="297" width="10" height="0" /><rect fill="#0c0" x="140" y="297" width="10" height="0" /><rect fill="#00c" x="140" y="297" width="10" height="0" /><rect fill="#444" x="140" y="288" width="10" height="9" /><circle fill="white" cx="145" cy="256" r="4" /><rect fill="#0f0" x="160" y="320" width="10" height="0" /><rect fill="#f00" x="160" y="320" width="10" height="0" /><rect fill="#f8f" x="160" y="320" width="10" height="0" /><rect fill="#08f" x="160" y="319" width="10" height="0" /><rect fill="#f80" x="160" y="319" width="10" height="0" /><rect fill="#080" x="160" y="319" width="10" height="0" /><rect fill="#f0f" x="160" y="319" width="10" height="0" /><rect fill="#ff0" x="160" y="319" width="10" height="0" /><rect fill="#0ff" x="160" y="319" width="10" height="0" /><rect fill="#c00" x="160" y="319" width="10" height="1" /><rect fill="#0c0" x="160" y="318" width="10" height="1" /><rect fill="#00c" x="160" y="317" width="10" height="1" /><rect fill="#444" x="160" y="316" width="10" height="1" /><circle fill="white" cx="165" cy="281" r="4" /><rect fill="#0f0" x="180" y="203" width="10" height="117" /><rect fill="#f00" x="180" y="127" width="10" height="76" /><rect fill="#f8f" x="180" y="125" width="10" height="1" /><rect fill="#08f" x="180" y="91" width="10" height="35" /><rect fill="#f80" x="180" y="60" width="10" height="31" /><rect fill="#080" x="180" y="60" width="10" height="0" /><rect fill="#f0f" x="180" y="60" width="10" height="0" /><rect fill="#ff0" x="180" y="60" width="10" height="0" /><rect fill="#0ff" x="180" y="60" width="10" height="0" /><rect fill="#c00" x="180" y="60" width="10" height="0" /><rect fill="#0c0" x="180" y="59" width="10" height="0" /><rect fill="#00c" x="180" y="59" width="10" height="0" /><rect fill="#444" x="180" y="44" width="10" height="15" /><circle fill="white" cx="185" cy="17" r="4" /><rect fill="#0f0" x="200" y="300" width="10" height="20" /><rect fill="#f00" x="200" y="290" width="10" height="10" /><rect fill="#f8f" x="200" y="210" width="10" height="80" /><rect fill="#08f" x="200" y="197" width="10" height="13" /><rect fill="#f80" x="200" y="184" width="10" height="13" /><rect fill="#080" x="200" y="184" width="10" height="0" /><rect fill="#f0f" x="200" y="184" width="10" height="0" /><rect fill="#ff0" x="200" y="184" width="10" height="0" /><rect fill="#0ff" x="200" y="184" width="10" height="0" /><rect fill="#c00" x="200" y="182" width="10" height="1" /><rect fill="#0c0" x="200" y="181" width="10" height="1" /><rect fill="#00c" x="200" y="179" width="10" height="1" /><rect fill="#444" x="200" y="167" width="10" height="12" /><circle fill="white" cx="205" cy="110" r="4" /><rect fill="#0f0" x="220" y="304" width="10" height="16" /><rect fill="#f00" x="220" y="302" width="10" height="2" /><rect fill="#f8f" x="220" y="302" width="10" height="0" /><rect fill="#08f" x="220" y="302" width="10" height="0" /><rect fill="#f80" x="220" y="301" width="10" height="0" /><rect fill="#080" x="220" y="295" width="10" height="6" /><rect fill="#f0f" x="220" y="289" width="10" height="6" /><rect fill="#ff0" x="220" y="276" width="10" height="13" /><rect fill="#0ff" x="220" y="263" width="10" height="13" /><rect fill="#c00" x="220" y="263" width="10" height="0" /><rect fill="#0c0" x="220" y="263" width="10" height="0" /><rect fill="#00c" x="220" y="263" width="10" height="0" /><rect fill="#444" x="220" y="262" width="10" height="0" /><circle fill="white" cx="225" cy="266" r="4" /><rect fill="#0f0" x="240" y="310" width="10" height="10" /><rect fill="#f00" x="240" y="307" width="10" height="3" /><rect fill="#f8f" x="240" y="307" width="10" height="0" /><rect fill="#08f" x="240" y="306" width="10" height="1" /><rect fill="#f80" x="240" y="305" width="10" height="1" /><rect fill="#080" x="240" y="305" width="10" height="0" /><rect fill="#f0f" x="240" y="305" width="10" height="0" /><rect fill="#ff0" x="240" y="305" width="10" height="0" /><rect fill="#0ff" x="240" y="305" width="10" height="0" /><rect fill="#c00" x="240" y="293" width="10" height="12" /><rect fill="#0c0" x="240" y="280" width="10" height="12" /><rect fill="#00c" x="240" y="268" width="10" height="12" /><rect fill="#444" x="240" y="240" width="10" height="28" /><circle fill="white" cx="245" cy="267" r="4" /><rect fill="#0f0" x="260" y="311" width="10" height="9" /><rect fill="#f00" x="260" y="285" width="10" height="26" /><rect fill="#f8f" x="260" y="284" width="10" height="1" /><rect fill="#08f" x="260" y="265" width="10" height="20" /><rect fill="#f80" x="260" y="252" width="10" height="12" /><rect fill="#080" x="260" y="252" width="10" height="0" /><rect fill="#f0f" x="260" y="252" width="10" height="0" /><rect fill="#ff0" x="260" y="252" width="10" height="0" /><rect fill="#0ff" x="260" y="252" width="10" height="0" /><rect fill="#c00" x="260" y="252" width="10" height="0" /><rect fill="#0c0" x="260" y="252" width="10" height="0" /><rect fill="#00c" x="260" y="252" width="10" height="0" /><rect fill="#444" x="260" y="248" width="10" height="4" /><circle fill="white" cx="265" cy="219" r="4" /><rect fill="#0f0" x="280" y="319" width="10" height="1" /><rect fill="#f00" x="280" y="319" width="10" height="1" /><rect fill="#f8f" x="280" y="319" width="10" height="0" /><rect fill="#08f" x="280" y="319" width="10" height="0" /><rect fill="#f80" x="280" y="318" width="10" height="0" /><rect fill="#080" x="280" y="307" width="10" height="12" /><rect fill="#f0f" x="280" y="295" width="10" height="12" /><rect fill="#ff0" x="280" y="289" width="10" height="6" /><rect fill="#0ff" x="280" y="283" width="10" height="6" /><rect fill="#c00" x="280" y="283" width="10" height="0" /><rect fill="#0c0" x="280" y="283" width="10" height="0" /><rect fill="#00c" x="280" y="283" width="10" height="0" /><rect fill="#444" x="280" y="283" width="10" height="0" /><circle fill="white" cx="285" cy="280" r="4" /><rect fill="#0f0" x="300" y="317" width="10" height="3" /><rect fill="#f00" x="300" y="315" width="10" height="2" /><rect fill="#f8f" x="300" y="315" width="10" height="0" /><rect fill="#08f" x="300" y="314" width="10" height="1" /><rect fill="#f80" x="300" y="310" width="10" height="4" /><rect fill="#080" x="300" y="301" width="10" height="9" /><rect fill="#f0f" x="300" y="292" width="10" height="9" /><rect fill="#ff0" x="300" y="264" width="10" height="28" /><rect fill="#0ff" x="300" y="236" width="10" height="28" /><rect fill="#c00" x="300" y="236" width="10" height="0" /><rect fill="#0c0" x="300" y="236" width="10" height="0" /><rect fill="#00c" x="300" y="236" width="10" height="0" /><rect fill="#444" x="300" y="232" width="10" height="4" /><circle fill="white" cx="305" cy="236" r="4" /><rect fill="#0f0" x="320" y="307" width="10" height="13" /><rect fill="#f00" x="320" y="299" width="10" height="7" /><rect fill="#f8f" x="320" y="299" width="10" height="0" /><rect fill="#08f" x="320" y="295" width="10" height="4" /><rect fill="#f80" x="320" y="292" width="10" height="3" /><rect fill="#080" x="320" y="291" width="10" height="1" /><rect fill="#f0f" x="320" y="290" width="10" height="1" /><rect fill="#ff0" x="320" y="283" width="10" height="7" /><rect fill="#0ff" x="320" y="275" width="10" height="7" /><rect fill="#c00" x="320" y="275" width="10" height="0" /><rect fill="#0c0" x="320" y="275" width="10" height="0" /><rect fill="#00c" x="320" y="275" width="10" height="0" /><rect fill="#444" x="320" y="272" width="10" height="3" /><circle fill="white" cx="325" cy="263" r="4" /><rect fill="#0f0" x="340" y="320" width="10" height="0" /><rect fill="#f00" x="340" y="320" width="10" height="0" /><rect fill="#f8f" x="340" y="320" width="10" height="0" /><rect fill="#08f" x="340" y="320" width="10" height="0" /><rect fill="#f80" x="340" y="320" width="10" height="0" /><rect fill="#080" x="340" y="320" width="10" height="0" /><rect fill="#f0f" x="340" y="320" width="10" height="0" /><rect fill="#ff0" x="340" y="320" width="10" height="0" /><rect fill="#0ff" x="340" y="320" width="10" height="0" /><rect fill="#c00" x="340" y="320" width="10" height="0" /><rect fill="#0c0" x="340" y="320" width="10" height="0" /><rect fill="#00c" x="340" y="320" width="10" height="0" /><rect fill="#444" x="340" y="320" width="10" height="0" /><circle fill="white" cx="345" cy="285" r="4" /><rect fill="#0f0" x="360" y="316" width="10" height="4" /><rect fill="#f00" x="360" y="315" width="10" height="0" /><rect fill="#f8f" x="360" y="315" width="10" height="0" /><rect fill="#08f" x="360" y="305" width="10" height="10" /><rect fill="#f80" x="360" y="297" width="10" height="9" /><rect fill="#080" x="360" y="297" width="10" height="0" /><rect fill="#f0f" x="360" y="297" width="10" height="0" /><rect fill="#ff0" x="360" y="297" width="10" height="0" /><rect fill="#0ff" x="360" y="297" width="10" height="0" /><rect fill="#c00" x="360" y="295" width="10" height="2" /><rect fill="#0c0" x="360" y="293" width="10" height="2" /><rect fill="#00c" x="360" y="292" width="10" height="2" /><rect fill="#444" x="360" y="286" width="10" height="5" /><circle fill="white" cx="365" cy="227" r="4" /><rect fill="#0f0" x="380" y="310" width="10" height="10" /><rect fill="#f00" x="380" y="309" width="10" height="1" /><rect fill="#f8f" x="380" y="309" width="10" height="0" /><rect fill="#08f" x="380" y="309" width="10" height="0" /><rect fill="#f80" x="380" y="308" width="10" height="1" /><rect fill="#080" x="380" y="307" width="10" height="1" /><rect fill="#f0f" x="380" y="306" width="10" height="1" /><rect fill="#ff0" x="380" y="302" width="10" height="4" /><rect fill="#0ff" x="380" y="298" width="10" height="4" /><rect fill="#c00" x="380" y="298" width="10" height="0" /><rect fill="#0c0" x="380" y="298" width="10" height="0" /><rect fill="#00c" x="380" y="298" width="10" height="0" /><rect fill="#444" x="380" y="298" width="10" height="0" /><circle fill="white" cx="385" cy="244" r="4" /><rect fill="#0f0" x="400" y="315" width="10" height="5" /><rect fill="#f00" x="400" y="313" width="10" height="3" /><rect fill="#f8f" x="400" y="313" width="10" height="0" /><rect fill="#08f" x="400" y="306" width="10" height="6" /><rect fill="#f80" x="400" y="290" width="10" height="16" /><rect fill="#080" x="400" y="290" width="10" height="0" /><rect fill="#f0f" x="400" y="290" width="10" height="0" /><rect fill="#ff0" x="400" y="290" width="10" height="0" /><rect fill="#0ff" x="400" y="290" width="10" height="0" /><rect fill="#c00" x="400" y="290" width="10" height="0" /><rect fill="#0c0" x="400" y="290" width="10" height="0" /><rect fill="#00c" x="400" y="290" width="10" height="0" /><rect fill="#444" x="400" y="276" width="10" height="14" /><circle fill="white" cx="405" cy="240" r="4" /><rect fill="#0f0" x="420" y="320" width="10" height="0" /><rect fill="#f00" x="420" y="317" width="10" height="3" /><rect fill="#f8f" x="420" y="317" width="10" height="0" /><rect fill="#08f" x="420" y="316" width="10" height="1" /><rect fill="#f80" x="420" y="315" width="10" height="1" /><rect fill="#080" x="420" y="315" width="10" height="0" /><rect fill="#f0f" x="420" y="315" width="10" height="0" /><rect fill="#ff0" x="420" y="315" width="10" height="0" /><rect fill="#0ff" x="420" y="315" width="10" height="0" /><rect fill="#c00" x="420" y="315" width="10" height="0" /><rect fill="#0c0" x="420" y="315" width="10" height="0" /><rect fill="#00c" x="420" y="315" width="10" height="0" /><rect fill="#444" x="420" y="315" width="10" height="0" /><circle fill="white" cx="425" cy="280" r="4" /><rect fill="#0f0" x="440" y="320" width="10" height="0" /><rect fill="#f00" x="440" y="320" width="10" height="0" /><rect fill="#f8f" x="440" y="320" width="10" height="0" /><rect fill="#08f" x="440" y="320" width="10" height="0" /><rect fill="#f80" x="440" y="320" width="10" height="0" /><rect fill="#080" x="440" y="320" width="10" height="0" /><rect fill="#f0f" x="440" y="320" width="10" height="0" /><rect fill="#ff0" x="440" y="320" width="10" height="0" /><rect fill="#0ff" x="440" y="320" width="10" height="0" /><rect fill="#c00" x="440" y="320" width="10" height="0" /><rect fill="#0c0" x="440" y="320" width="10" height="0" /><rect fill="#00c" x="440" y="320" width="10" height="0" /><rect fill="#444" x="440" y="320" width="10" height="0" /><circle fill="white" cx="445" cy="284" r="4" /><rect fill="#0f0" x="460" y="317" width="10" height="3" /><rect fill="#f00" x="460" y="316" width="10" height="0" /><rect fill="#f8f" x="460" y="316" width="10" height="0" /><rect fill="#08f" x="460" y="315" width="10" height="1" /><rect fill="#f80" x="460" y="314" width="10" height="1" /><rect fill="#080" x="460" y="314" width="10" height="0" /><rect fill="#f0f" x="460" y="313" width="10" height="0" /><rect fill="#ff0" x="460" y="312" width="10" height="1" /><rect fill="#0ff" x="460" y="311" width="10" height="1" /><rect fill="#c00" x="460" y="310" width="10" height="0" /><rect fill="#0c0" x="460" y="310" width="10" height="0" /><rect fill="#00c" x="460" y="310" width="10" height="0" /><rect fill="#444" x="460" y="310" width="10" height="0" /><circle fill="white" cx="465" cy="254" r="4" /><rect fill="#0f0" x="480" y="315" width="10" height="5" /><rect fill="#f00" x="480" y="307" width="10" height="8" /><rect fill="#f8f" x="480" y="307" width="10" height="0" /><rect fill="#08f" x="480" y="305" width="10" height="2" /><rect fill="#f80" x="480" y="304" width="10" height="1" /><rect fill="#080" x="480" y="303" width="10" height="0" /><rect fill="#f0f" x="480" y="303" width="10" height="0" /><rect fill="#ff0" x="480" y="303" width="10" height="0" /><rect fill="#0ff" x="480" y="303" width="10" height="0" /><rect fill="#c00" x="480" y="303" width="10" height="0" /><rect fill="#0c0" x="480" y="303" width="10" height="0" /><rect fill="#00c" x="480" y="303" width="10" height="0" /><rect fill="#444" x="480" y="300" width="10" height="3" /><circle fill="white" cx="485" cy="271" r="4" /><rect fill="#0f0" x="500" y="295" width="10" height="25" /><rect fill="#f00" x="500" y="287" width="10" height="8" /><rect fill="#f8f" x="500" y="285" width="10" height="3" /><rect fill="#08f" x="500" y="280" width="10" height="5" /><rect fill="#f80" x="500" y="274" width="10" height="6" /><rect fill="#080" x="500" y="274" width="10" height="0" /><rect fill="#f0f" x="500" y="274" width="10" height="0" /><rect fill="#ff0" x="500" y="273" width="10" height="1" /><rect fill="#0ff" x="500" y="272" width="10" height="1" /><rect fill="#c00" x="500" y="272" width="10" height="0" /><rect fill="#0c0" x="500" y="272" width="10" height="0" /><rect fill="#00c" x="500" y="272" width="10" height="0" /><rect fill="#444" x="500" y="266" width="10" height="6" /><circle fill="white" cx="505" cy="233" r="4" /><rect fill="#0f0" x="520" y="319" width="10" height="1" /><rect fill="#f00" x="520" y="314" width="10" height="5" /><rect fill="#f8f" x="520" y="314" width="10" height="0" /><rect fill="#08f" x="520" y="313" width="10" height="1" /><rect fill="#f80" x="520" y="308" width="10" height="5" /><rect fill="#080" x="520" y="308" width="10" height="0" /><rect fill="#f0f" x="520" y="308" width="10" height="0" /><rect fill="#ff0" x="520" y="308" width="10" height="0" /><rect fill="#0ff" x="520" y="308" width="10" height="0" /><rect fill="#c00" x="520" y="308" width="10" height="0" /><rect fill="#0c0" x="520" y="308" width="10" height="0" /><rect fill="#00c" x="520" y="308" width="10" height="0" /><rect fill="#444" x="520" y="308" width="10" height="0" /><circle fill="white" cx="525" cy="283" r="4" /><rect fill="#0f0" x="540" y="309" width="10" height="11" /><rect fill="#f00" x="540" y="309" width="10" height="0" /><rect fill="#f8f" x="540" y="309" width="10" height="0" /><rect fill="#08f" x="540" y="294" width="10" height="15" /><rect fill="#f80" x="540" y="271" width="10" height="23" /><rect fill="#080" x="540" y="271" width="10" height="0" /><rect fill="#f0f" x="540" y="271" width="10" height="0" /><rect fill="#ff0" x="540" y="271" width="10" height="0" /><rect fill="#0ff" x="540" y="271" width="10" height="0" /><rect fill="#c00" x="540" y="271" width="10" height="0" /><rect fill="#0c0" x="540" y="271" width="10" height="0" /><rect fill="#00c" x="540" y="271" width="10" height="0" /><rect fill="#444" x="540" y="265" width="10" height="6" /><circle fill="white" cx="545" cy="268" r="4" /><circle fill="white" cx="610" cy="15" r="4" /><rect fill="#0f0" x="605" y="55" width="10" height="10" /><rect fill="#f00" x="605" y="75" width="10" height="10" /><rect fill="#f8f" x="605" y="95" width="10" height="10" /><rect fill="#08f" x="605" y="115" width="10" height="10" /><rect fill="#f80" x="605" y="135" width="10" height="10" /><rect fill="#080" x="605" y="155" width="10" height="10" /><rect fill="#f0f" x="605" y="175" width="10" height="10" /><rect fill="#ff0" x="605" y="195" width="10" height="10" /><rect fill="#0ff" x="605" y="215" width="10" height="10" /><rect fill="#c00" x="605" y="235" width="10" height="10" /><rect fill="#0c0" x="605" y="255" width="10" height="10" /><rect fill="#00c" x="605" y="275" width="10" height="10" /><rect fill="#444" x="605" y="295" width="10" height="10" /></g><g style="font-size: 75%;"><text transform="translate(40,325) rotate(90)" x="0" y="0">alluxio</text><text transform="translate(60,325) rotate(90)" x="0" y="0">arduino</text><text transform="translate(80,325) rotate(90)" x="0" y="0">binnavi</text><text transform="translate(100,325) rotate(90)" x="0" y="0">gephi</text><text transform="translate(120,325) rotate(90)" x="0" y="0">ghidra</text><text transform="translate(140,325) rotate(90)" x="0" y="0">grpc</text><text transform="translate(160,325) rotate(90)" x="0" y="0">gson</text><text transform="translate(180,325) rotate(90)" x="0" y="0">hadoop</text><text transform="translate(200,325) rotate(90)" x="0" y="0">ignite</text><text transform="translate(220,325) rotate(90)" x="0" y="0">jedit</text><text transform="translate(240,325) rotate(90)" x="0" y="0">jenkins</text><text transform="translate(260,325) rotate(90)" x="0" y="0">jetty</text><text transform="translate(280,325) rotate(90)" x="0" y="0">jhotdraw</text><text transform="translate(300,325) rotate(90)" x="0" y="0">jitsi</text><text transform="translate(320,325) rotate(90)" x="0" y="0">jmeter</text><text transform="translate(340,325) rotate(90)" x="0" y="0">jpacman</text><text transform="translate(360,325) rotate(90)" x="0" y="0">kafka</text><text transform="translate(380,325) rotate(90)" x="0" y="0">libgdx</text><text transform="translate(400,325) rotate(90)" x="0" y="0">netty</text><text transform="translate(420,325) rotate(90)" x="0" y="0">okhttp</text><text transform="translate(440,325) rotate(90)" x="0" y="0">picasso</text><text transform="translate(460,325) rotate(90)" x="0" y="0">plantuml</text><text transform="translate(480,325) rotate(90)" x="0" y="0">selenium</text><text transform="translate(500,325) rotate(90)" x="0" y="0">tomcat</text><text transform="translate(520,325) rotate(90)" x="0" y="0">websocket</text><text transform="translate(540,325) rotate(90)" x="0" y="0">zookeeper</text><text x="620" y="20">kloc</text><text x="620" y="65">PATH</text><text x="620" y="85">URL</text><text x="620" y="105">SQL</text><text x="620" y="125">HOST</text><text x="620" y="145">PORT</text><text x="620" y="165">XCOORD</text><text x="620" y="185">YCOORD</text><text x="620" y="205">WIDTH</text><text x="620" y="225">HEIGHT</text><text x="620" y="245">YEAR</text><text x="620" y="265">MONTH</text><text x="620" y="285">DAY</text><text x="620" y="305">OTHER</text></g><g style="font-size: 70%;"><text x="550" y="16">#ctype</text><text text-anchor="end" x="28" y="255">200</text><text text-anchor="end" x="28" y="225">400</text><text text-anchor="end" x="28" y="195">600</text><text text-anchor="end" x="28" y="165">800</text><text text-anchor="end" x="28" y="135">1000</text><text text-anchor="end" x="28" y="105">1200</text><text text-anchor="end" x="28" y="75">1400</text><text text-anchor="end" x="28" y="45">1600</text><text text-anchor="end" x="28" y="15">1800</text><text x="562" y="325">0</text><text x="562" y="301">200</text><text x="562" y="277">400</text><text x="562" y="253">600</text><text x="562" y="229">800</text><text x="562" y="205">1000</text><text x="562" y="181">1200</text><text x="562" y="157">1400</text><text x="562" y="133">1600</text><text x="562" y="109">1800</text><text x="562" y="85">2000</text><text x="562" y="61">2200</text><text x="562" y="37">2400</text><text x="32" y="15">kloc</text></g></svg>
</div>

<h3 id="topexprs">3.3. Top C-Type Expressions for Each Project</h3>

<h4>PATH</h4>
<table border>
<tr><th>Project</th><th>Top Expressions</th></tr>
<tr><td colspan="2"></td></tr>
<tr><td>alluxio</td><td><code>path, mLocalUfsPath+ufsBase, base</code></td></tr>
<tr><td>arduino</td><td><code>path, PreferencesData.get("runtime.ide.path")</code></td></tr>
<tr><td>binnavi</td><td><code>filename, directory, pathname</code></td></tr>
<tr><td>gephi</td><td><code>System.getProperty("netbeans.user")</code></td></tr>
<tr><td>ghidra</td><td><code>getTestDirectoryPath(), path, filename</code></td></tr>
<tr><td>grpc</td><td><code>uri.getPath()</code></td></tr>
<tr><td>hadoop</td><td><code>GenericTestUtils.getRandomizedTempPath()</code></td></tr>
<tr><td>ignite</td><td><code>path, U.defaultWorkDirectory(), fileName</code></td></tr>
<tr><td>jedit</td><td><code>path, dir, directory</code></td></tr>
<tr><td>jenkins</td><td><code>System.getProperty("user.home"), war</code></td></tr>
<tr><td>jetty</td><td><code>file.getParent()</code></td></tr>
<tr><td>jhotdraw</td><td><code>prefs.get("projectFile", home)</code></td></tr>
<tr><td>jitsi</td><td><code>path, localPath</code></td></tr>
<tr><td>jmeter</td><td><code>filename, path, file</code></td></tr>
<tr><td>kafka</td><td><code>storeDirectoryPath, argument</code></td></tr>
<tr><td>libgdx</td><td><code>name, sourcePath, imagePath.replace('\textbackslash\textbackslash','/')</code></td></tr>
<tr><td>netty</td><td><code>getClass().getResource("test.crt").getFile()</code></td></tr>
<tr><td>plantuml</td><td><code>filename, newName</code></td></tr>
<tr><td>selenium</td><td><code>System.getProperty("java.io.tmpdir"), logName</code></td></tr>
<tr><td>tomcat</td><td><code>pathname, path, docBase</code></td></tr>
<tr><td>zookeeper</td><td><code>path, KerberosTestUtils.getKeytabFile()</code></td></tr>
</table><table border>

<h4>URL</h4>
<tr><th>Project</th><th>Top Expressions</th></tr>
<tr><td colspan="2"></td></tr>
<tr><td>alluxio</td><td><code>journalDirectory, folder, inputDir</code></td></tr>
<tr><td>arduino</td><td><code>contribution.getUrl(), packageIndexURLString</code></td></tr>
<tr><td>binnavi</td><td><code>url, urlString</code></td></tr>
<tr><td>ghidra</td><td><code>ref, getAbsolutePath(), url.toExternalForm()</code></td></tr>
<tr><td>grpc</td><td><code>target, TARGET, oobTarget</code></td></tr>
<tr><td>gson</td><td><code>nextString, urlValue, uriValue</code></td></tr>
<tr><td>hadoop</td><td><code>uri, url, s</code></td></tr>
<tr><td>ignite</td><td><code>GridTestProperties.getProperty("p2p.uri.cls")</code></td></tr>
<tr><td>jedit</td><td><code>path, str, fileIcon</code></td></tr>
<tr><td>jenkins</td><td><code>url, site.getData().core.url, plugin.url</code></td></tr>
<tr><td>jetty</td><td><code>uri, inputUrl.toString(), s</code></td></tr>
<tr><td>jitsi</td><td><code>url, imagePath, sourceString</code></td></tr>
<tr><td>jmeter</td><td><code>url, LOCAL_HOST, requestPath</code></td></tr>
<tr><td>kafka</td><td><code>config.getString(METRICS_URL_CONFIG)</code></td></tr>
<tr><td>libgdx</td><td><code>url, URI, httpRequest.getUrl()+queryString</code></td></tr>
<tr><td>netty</td><td><code>URL, request.uri(), server</code></td></tr>
<tr><td>selenium</td><td><code>url, baseUrl, (String)raw.get("uri")</code></td></tr>
<tr><td>tomcat</td><td><code>url, location, path</code></td></tr>
<tr><td>websocket</td><td><code>uriField.getText(), uriinput.getText()</code></td></tr>
<tr><td>zookeeper</td><td><code>urlStr</code></td></tr>
</table><table border>
<h4>XCOORD</h4>
<tr><th>Project</th><th>Top Expressions</th></tr>
<tr><td colspan="2"></td></tr>
<tr><td>arduino</td><td><code>noLeft, cancelLeft</code></td></tr>
<tr><td>binnavi</td><td><code>x, m_x</code></td></tr>
<tr><td>gephi</td><td><code>currentMouseX, x, bounds.x</code></td></tr>
<tr><td>ghidra</td><td><code>x, center.x+deltaX, filterPanelBounds.x</code></td></tr>
<tr><td>jedit</td><td><code>x, event.getX(), leftButtonWidth+leftWidth</code></td></tr>
<tr><td>jhotdraw</td><td><code>evt.getX(), x, e.getX()</code></td></tr>
<tr><td>jitsi</td><td><code>x, button.getX(), dx</code></td></tr>
<tr><td>jmeter</td><td><code>graphPanel.getLocation().x, cellRect.x, x</code></td></tr>
<tr><td>libgdx</td><td><code>upButtonX, getWidth()-buttonSize.width-5, x</code></td></tr>
<tr><td>plantuml</td><td><code>e.getX()</code></td></tr>
</table><table border>
<h4>WIDTH</h4>
<tr><th>Project</th><th>Top Expressions</th></tr>
<tr><td colspan="2"></td></tr>
<tr><td>arduino</td><td><code>width, imageW, Preferences.BUTTON_WIDTH</code></td></tr>
<tr><td>binnavi</td><td><code>COLORPANEL_WIDTH, TEXTFIELD_WIDTH, width</code></td></tr>
<tr><td>gephi</td><td><code>w, constraintWidth, DEPTH</code></td></tr>
<tr><td>ghidra</td><td><code>width, center.width, filterPanelBounds.width</code></td></tr>
<tr><td>jedit</td><td><code>width, buttonSize.width, colWidth</code></td></tr>
<tr><td>jhotdraw</td><td><code>frameWidth, r.width, bounds.width</code></td></tr>
<tr><td>jitsi</td><td><code>MAX_MSG_PANE_WIDTH, WIDTH, width</code></td></tr>
<tr><td>jmeter</td><td><code>graphPanel.width</code></td></tr>
<tr><td>libgdx</td><td><code>width, buttonSize.width</code></td></tr>
<tr><td>plantuml</td><td><code>newWidth</code></td></tr>
<tr><td>tomcat</td><td><code>WIDTH</code></td></tr>
</table>

<h3 id="complex">3.4. Complex C-Type Expressions</h3>

<h4>PATH</h4>
<ul>
<li> <code>mLocalUfsPath + ufsBase</code>
<li> <code>selectedFile.getAbsolutePath() + PREFERENCES_FILE_EXTENSION</code>
<li> <code>dir.getPath() + DIR_FAILURE_SUFFIX</code>
<li> <code>U.defaultWorkDirectory() + separatorChar + DEFAULT_TARGET_FOLDER + separatorChar</code>
</ul>
<h4>URL</h4>
<ul>
<li> <code>url.toExternalForm().substring(GhidraURL.PROTOCOL.length() + 1)</code>
<li> <code>str + KMSRESTConstants.SERVICE_VERSION + "/"</code>
<li> <code>newOrigin(getScheme(),getHost(),getPort()).asString() + path</code>
<li> <code>base + configFile</code>
</ul>
<h4>XCOORD</h4>
<ul>
<li> <code>center.x + center.width</code>
<li> <code>leftButtonWidth + leftWidth</code>
<li> <code>evt.getX() - getInsets().left</code>
<li> <code>prefs.getInt(name+".x", 0)</code>
</ul>
<h4>WIDTH</h4>
<ul>
<li> <code>Math.max(contentWidth, menuWidth) + insets.left + insets.right</code>
<li> <code>TITLE_X_OFFSET + titlePreferredSize.width</code>
<li> <code>width + insets.left + insets.right + 2</code>
<li> <code>(int)(bounds.getWidth() * percent)</code>
</ul>

<h3 id="complexity">3.5. Complexity of C-Type Expressions</h3>
<p>
(n: number of terms)
<div class=figure>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="400" height="250" version="1.1"><g fill="none" stroke="black" stroke-width="2"><line x1="30" y1="220" x2="30" y2="10" /><line x1="30" y1="220" x2="310" y2="220" /></g><g fill="none" stroke-width="3"><polyline stroke="#00c" points="50,21 90,220 130,218 170,220 210,220 250,220 290,220" /><polyline stroke="#0c0" points="50,60 90,180 130,218 170,220 210,220 250,220 290,220" /><polyline stroke="#c00" points="50,27 90,215 130,217 170,220 210,220 250,220 290,220" /><polyline stroke="#0ff" points="50,77 90,189 130,207 170,213 210,217 250,217 290,218" /><polyline stroke="#ff0" points="50,78 90,189 130,207 170,215 210,217 250,216 290,216" /><polyline stroke="#f0f" points="50,115 90,175 130,199 170,202 210,214 250,216 290,217" /><polyline stroke="#080" points="50,111 90,170 130,200 170,207 210,216 250,215 290,217" /><polyline stroke="#f80" points="50,83 90,165 130,215 170,217 210,219 250,219 290,220" /><polyline stroke="#08f" points="50,101 90,197 130,214 170,175 210,216 250,219 290,215" /><polyline stroke="#f8f" points="50,125 90,195 130,202 170,213 210,211 250,209 290,182" /><polyline stroke="#f00" points="50,156 90,183 130,192 170,193 210,199 250,208 290,206" /><polyline stroke="#0f0" points="50,120 90,174 130,206 170,207 210,210 250,215 290,205" /></g><g fill="white" stroke="black"><rect fill="#00c" x="47" y="18" width="6" height="6" /><rect fill="#00c" x="87" y="217" width="6" height="6" /><rect fill="#00c" x="127" y="215" width="6" height="6" /><rect fill="#00c" x="167" y="217" width="6" height="6" /><rect fill="#00c" x="207" y="217" width="6" height="6" /><rect fill="#00c" x="247" y="217" width="6" height="6" /><rect fill="#00c" x="287" y="217" width="6" height="6" /><rect fill="#0c0" x="47" y="57" width="6" height="6" /><rect fill="#0c0" x="87" y="177" width="6" height="6" /><rect fill="#0c0" x="127" y="215" width="6" height="6" /><rect fill="#0c0" x="167" y="217" width="6" height="6" /><rect fill="#0c0" x="207" y="217" width="6" height="6" /><rect fill="#0c0" x="247" y="217" width="6" height="6" /><rect fill="#0c0" x="287" y="217" width="6" height="6" /><rect fill="#c00" x="47" y="24" width="6" height="6" /><rect fill="#c00" x="87" y="212" width="6" height="6" /><rect fill="#c00" x="127" y="214" width="6" height="6" /><rect fill="#c00" x="167" y="217" width="6" height="6" /><rect fill="#c00" x="207" y="217" width="6" height="6" /><rect fill="#c00" x="247" y="217" width="6" height="6" /><rect fill="#c00" x="287" y="217" width="6" height="6" /><rect fill="#0ff" x="47" y="74" width="6" height="6" /><rect fill="#0ff" x="87" y="186" width="6" height="6" /><rect fill="#0ff" x="127" y="204" width="6" height="6" /><rect fill="#0ff" x="167" y="210" width="6" height="6" /><rect fill="#0ff" x="207" y="214" width="6" height="6" /><rect fill="#0ff" x="247" y="214" width="6" height="6" /><rect fill="#0ff" x="287" y="215" width="6" height="6" /><rect fill="#ff0" x="47" y="75" width="6" height="6" /><rect fill="#ff0" x="87" y="186" width="6" height="6" /><rect fill="#ff0" x="127" y="204" width="6" height="6" /><rect fill="#ff0" x="167" y="212" width="6" height="6" /><rect fill="#ff0" x="207" y="214" width="6" height="6" /><rect fill="#ff0" x="247" y="213" width="6" height="6" /><rect fill="#ff0" x="287" y="213" width="6" height="6" /><rect fill="#f0f" x="47" y="112" width="6" height="6" /><rect fill="#f0f" x="87" y="172" width="6" height="6" /><rect fill="#f0f" x="127" y="196" width="6" height="6" /><rect fill="#f0f" x="167" y="199" width="6" height="6" /><rect fill="#f0f" x="207" y="211" width="6" height="6" /><rect fill="#f0f" x="247" y="213" width="6" height="6" /><rect fill="#f0f" x="287" y="214" width="6" height="6" /><rect fill="#080" x="47" y="108" width="6" height="6" /><rect fill="#080" x="87" y="167" width="6" height="6" /><rect fill="#080" x="127" y="197" width="6" height="6" /><rect fill="#080" x="167" y="204" width="6" height="6" /><rect fill="#080" x="207" y="213" width="6" height="6" /><rect fill="#080" x="247" y="212" width="6" height="6" /><rect fill="#080" x="287" y="214" width="6" height="6" /><rect fill="#f80" x="47" y="80" width="6" height="6" /><rect fill="#f80" x="87" y="162" width="6" height="6" /><rect fill="#f80" x="127" y="212" width="6" height="6" /><rect fill="#f80" x="167" y="214" width="6" height="6" /><rect fill="#f80" x="207" y="216" width="6" height="6" /><rect fill="#f80" x="247" y="216" width="6" height="6" /><rect fill="#f80" x="287" y="217" width="6" height="6" /><rect fill="#08f" x="47" y="98" width="6" height="6" /><rect fill="#08f" x="87" y="194" width="6" height="6" /><rect fill="#08f" x="127" y="211" width="6" height="6" /><rect fill="#08f" x="167" y="172" width="6" height="6" /><rect fill="#08f" x="207" y="213" width="6" height="6" /><rect fill="#08f" x="247" y="216" width="6" height="6" /><rect fill="#08f" x="287" y="212" width="6" height="6" /><rect fill="#f8f" x="47" y="122" width="6" height="6" /><rect fill="#f8f" x="87" y="192" width="6" height="6" /><rect fill="#f8f" x="127" y="199" width="6" height="6" /><rect fill="#f8f" x="167" y="210" width="6" height="6" /><rect fill="#f8f" x="207" y="208" width="6" height="6" /><rect fill="#f8f" x="247" y="206" width="6" height="6" /><rect fill="#f8f" x="287" y="179" width="6" height="6" /><rect fill="#f00" x="47" y="153" width="6" height="6" /><rect fill="#f00" x="87" y="180" width="6" height="6" /><rect fill="#f00" x="127" y="189" width="6" height="6" /><rect fill="#f00" x="167" y="190" width="6" height="6" /><rect fill="#f00" x="207" y="196" width="6" height="6" /><rect fill="#f00" x="247" y="205" width="6" height="6" /><rect fill="#f00" x="287" y="203" width="6" height="6" /><rect fill="#0f0" x="47" y="117" width="6" height="6" /><rect fill="#0f0" x="87" y="171" width="6" height="6" /><rect fill="#0f0" x="127" y="203" width="6" height="6" /><rect fill="#0f0" x="167" y="204" width="6" height="6" /><rect fill="#0f0" x="207" y="207" width="6" height="6" /><rect fill="#0f0" x="247" y="212" width="6" height="6" /><rect fill="#0f0" x="287" y="202" width="6" height="6" /><rect fill="#0f0" x="320" y="20" width="6" height="6" /><rect fill="#f00" x="320" y="37" width="6" height="6" /><rect fill="#f8f" x="320" y="54" width="6" height="6" /><rect fill="#08f" x="320" y="71" width="6" height="6" /><rect fill="#f80" x="320" y="88" width="6" height="6" /><rect fill="#080" x="320" y="105" width="6" height="6" /><rect fill="#f0f" x="320" y="122" width="6" height="6" /><rect fill="#ff0" x="320" y="139" width="6" height="6" /><rect fill="#0ff" x="320" y="156" width="6" height="6" /><rect fill="#c00" x="320" y="173" width="6" height="6" /><rect fill="#0c0" x="320" y="190" width="6" height="6" /><rect fill="#00c" x="320" y="207" width="6" height="6" /></g><g text-anchor="end" style="font-size: 70%;"><text x="28" y="222">0%</text><text x="28" y="182">20%</text><text x="28" y="142">40%</text><text x="28" y="102">60%</text><text x="28" y="62">80%</text><text x="28" y="22">100%</text></g><g style="font-size: 75%;"><text x="332" y="27">PATH</text><text x="332" y="44">URL</text><text x="332" y="61">SQL</text><text x="332" y="78">HOST</text><text x="332" y="95">PORT</text><text x="332" y="112">XCOORD</text><text x="332" y="129">YCOORD</text><text x="332" y="146">WIDTH</text><text x="332" y="163">HEIGHT</text><text x="332" y="180">YEAR</text><text x="332" y="197">MONTH</text><text x="332" y="214">DAY</text><text text-anchor="middle" x="50" y="240">n=1</text><text text-anchor="middle" x="90" y="240">n=2</text><text text-anchor="middle" x="130" y="240">n=3</text><text text-anchor="middle" x="170" y="240">n=4</text><text text-anchor="middle" x="210" y="240">n=5</text><text text-anchor="middle" x="250" y="240">n=6</text><text text-anchor="middle" x="290" y="240">n&#8807;7</text></g></svg></div>

<h2 id="inference">4. Inferring C-types</h2>
<p>
We tried to infer the c-types from the surface clue of expressions.
<p>
Basic strategy:
<ol>
<li> Use the obtained c-type expressions (12k) as training set/test set.
<li> Extract the features from each expression.
<li> Use machine learning (decision tree) to identify the c-type from expressions.
</ol>
<p>
Decision tree-based machine learning is used because
<ul>
<li> They are suitable for symbolic features.
<li> The obtained rules are easy to understand for humans.
</ul>

<h4>Common Top Words for C-Type Expressions:</h4>
<table border>
<tr><th>C-Type</th><th>Top words (# Projects)</th></tr>
<tr><td colspan="2"></td></tr>
<tr><td><code>PATH</code></td><td><code>get</code> (21), <code>path</code> (21), <code>file</code> (20) </td></tr>
<tr><td><code>URL</code></td><td><code>url</code> (19), <code>get</code> (18), <code>string</code> (18) </td></tr>
<tr><td><code>SQL</code></td><td><code>get</code> (6), <code>query</code> (5), <code>create</code> (3) </td></tr>
<tr><td><code>HOST</code></td><td><code>host</code> (21), <code>get</code> (17), <code>address</code> (17) </td></tr>
<tr><td><code>PORT</code></td><td><code>port</code> (22), <code>get</code> (18), <code>local</code> (10) </td></tr>
<tr><td><code>XCOORD</code></td><td><code>width</code> (9), <code>x</code> (9), <code>get</code> (9) </td></tr>
<tr><td><code>YCOORD</code></td><td><code>height</code> (9), <code>y</code> (9), <code>get</code> (8) </td></tr>
<tr><td><code>WIDTH</code></td><td><code>width</code> (13), <code>get</code> (11), <code>size</code> (10) </td></tr>
<tr><td><code>HEIGHT</code></td><td><code>height</code> (12), <code>get</code> (11), <code>size</code> (10) </td></tr>
<tr><td><code>YEAR</code></td><td><code>year</code> (4), <code>get</code> (2), <code>int</code> (2) </td></tr>
<tr><td><code>MONTH</code></td><td><code>january</code> (3), <code>month</code> (3), <code>december</code> (3) </td></tr>
<tr><td><code>DAY</code></td><td><code>day</code> (3), <code>int</code> (2), <code>parse</code> (2) </td></tr>
</table>

<p>
We used a dataflow diagram to extract features from expressions:

<div class=figure>
<svg xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink"
     version="1.1" width="270" height="110">
  <defs>
    <marker id="arrow" viewBox="-5 -5 10 10" markerWidth="8" markerHeight="8" orient="auto">
      <polygon points="-5,-5 5,0 -5,5" fill="black" stroke="none" />
    </marker>
  </defs>
  <g stroke="black" stroke-width="1" fill="none">
    <ellipse cx="160" cy="20" rx="40" ry="15" />
    <ellipse cx="240" cy="20" rx="20" ry="15" />
    <ellipse cx="210" cy="60" rx="40" ry="15" />
    <path d="M210,75 l0,20" marker-end="url(#arrow)" />
    <path d="M170,35 l10,10" marker-end="url(#arrow)" />
    <path d="M240,35 l-5,10" marker-end="url(#arrow)" />
  </g>
  <g text-anchor="middle" style="font-family: monospace;">
    <text x="150" y="100" style="font-size: 125%;">new File(</text>
    <text x="230" y="100" style="font-size: 125%;">)</text>
    <text x="160" y="24">config</text>
    <text x="240" y="24">i</text>
    <text x="210" y="64">getPath()</text>
  </g>
  <g style="font-size: 75%; font-family: helvetica;">
    <text x="0" y="24">Secondary identifiers</text>
    <text x="0" y="64">Primary identifier</text>
  </g>
</svg><br>
Dataflow diagram of "<code>new File(config.getPath(i))</code>"
</div>

<h4>Dependency Rules</h4>
<table border>
<tr><th>Expression</th><th>Dependency</th></tr>
<tr><td colspan="2"></td></tr>
<tr><td><code>#</code> (constant)</td><td>
#</td></tr>
<tr><td><code>A</code> (variable access)</td><td>
A</td></tr>
<tr><td><code>A.B</code> (field access)</td><td>
A &rarr; B</td></tr>
<tr><td><code>B(A)</code> (method call)</td><td>
A &rarr; B()</td></tr>
<tr><td><code>A.B()</code> (instance method call)</td><td>
A &rarr; B()</td></tr>
<tr><td><code>op A</code> (applying a unary operator)</td><td>
A &rarr; op</td></tr>
<tr><td><code>A op B</code> (applying a binary operator)</td><td>
A &rarr; op, B &rarr; op</td></tr>
<tr><td><code>B = A</code> (assignment)</td><td>
A &rarr; B</td></tr>
</table>

<p>
We extract "primary identifier" and "secondary identifier(s)"
from the above diagram:
<ul>
<li> Primary identifer: <code>getPath()</code>
<li> Secondary identifiers: <code>config</code>, <code>i</code>
</ul>

<p>
We tested the obtained decision tree classifier
with leave-one-project-out cross validation:
<ul>
<li> Choose one project (and its c-type expressions) as a test set.
<li> Use the other 25 projects as a training set.
<li> Average the results of all projects.
</ul>

<h4>Classification Performance</h4>

<table border>
<tr><th>C-Type</th><th>Precision</th><th>Recall</th><th>F-score</th></tr>
<tr><td colspan="4"></td></tr>
<tr><td><code>PATH    </code></td><td align=right>  68.9% </td><td align=right> 91.8% </td><td align=right> 78.8% </td></tr>
<tr><td><code>URL     </code></td><td align=right>  61.3% </td><td align=right> 53.0% </td><td align=right> 56.8% </td></tr>
<tr><td><code>SQL     </code></td><td align=right>  70.4% </td><td align=right> 80.6% </td><td align=right> 75.2% </td></tr>
<tr><td><code>HOST    </code></td><td align=right>  70.0% </td><td align=right> 73.8% </td><td align=right> 71.8% </td></tr>
<tr><td><code>PORT    </code></td><td align=right>  84.6% </td><td align=right> 87.5% </td><td align=right> 86.0% </td></tr>
<tr><td><code>XCOORD  </code></td><td align=right>  95.7% </td><td align=right> 82.1% </td><td align=right> 88.3% </td></tr>
<tr><td><code>YCOORD  </code></td><td align=right>  97.5% </td><td align=right> 79.4% </td><td align=right> 87.5% </td></tr>
<tr><td><code>WIDTH   </code></td><td align=right>  92.0% </td><td align=right> 92.5% </td><td align=right> 92.2% </td></tr>
<tr><td><code>HEIGHT  </code></td><td align=right>  90.4% </td><td align=right> 93.4% </td><td align=right> 91.9% </td></tr>
<tr><td><code>YEAR    </code></td><td align=right> 100.0% </td><td align=right> 83.7% </td><td align=right> 91.1% </td></tr>
<tr><td><code>MONTH   </code></td><td align=right> 100.0% </td><td align=right> 77.0% </td><td align=right> 87.0% </td></tr>
<tr><td><code>DAY     </code></td><td align=right> 100.0% </td><td align=right> 61.1% </td><td align=right> 75.9% </td></tr>
<tr><td colspan="4"></td></tr>
<tr><td><strong>Average</strong> </td><td align=right>  <strong>85.9%</strong> </td><td align=right> <strong>79.6%</strong> </td><td align=right> <strong>82.7%</strong> </td></tr>
</table>

<p>
The reason why URL c-type wasn't recognized very well:
URL expressions often include HOST, PORT or PATH
expressions, which confused the classifier:
<blockquote><pre>
"https://"+getHostName()+":"+getPort()+"/"+getPath()
</pre></blockquote>


<h2 id="conclusion">5. Conclusion</h2>
<ul>
<li> We defined 12 c-types used in Java standard API.
<li> C-type expressions can be extracted by scanning API calls.
<li> We studied 26 open source projects.
<li> We used a decision tree classifier to infer the c-type
from its expressions and obtained 83% F-score.
</ul>

<h4>Research Questions (again):</h4>
<ol type=a>
<li> What are common "high-level data types"?<br>
→ The distribution of c-types depends on the domain of each project.
<li> How do programmers express these high-level types in source code?
<li> Is it possible to infer them from surface clues?<br>
→ These questions are related.
By using superficial features, we obtained a classifier with 83% F-score.
This suggests that programmers tend to express the common c-types
in a rather obvious way.
</ol>
<p>
In future, we could use the obtained classifier to
infer c-types in other parts of code.

<h3 id="threats">5.1. Threats to Validity</h3>
<ul>
<li> Not all the Java APIs are inspected.
<li> Selection bias of open source projects.
<li> Some c-type distinction might be vague: URL and URI, Filename and Pathname, etc.
<li> There could be potentially many other c-types that are rarely used.<Br>
  Our results didn't account them.
</ul>

<p>
<strong>Note to the listners of the previous presentation:</strong>
This work is related to the previous presentation (Use-Flow Graph Analysis)
only in that consistent variable naming would help the accuracy of c-type identification.
Also, both works use the same tooling (dataflow graph).
Other than that, two works are handling different problems.

<hr>
<address>Yusuke Shinyama</address>
